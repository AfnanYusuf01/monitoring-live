<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilih Paket Subscription - Streamo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fc;
            color: #2d3748;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #e53e3e 0%, #ed8936 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .pricing-card {
            border: 1px solid #e2e8f0;
            border-radius: 12px;
        }
        
        .feature-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            margin-bottom: 1rem;
        }
        
        .radio-card {
            cursor: pointer;
        }
        
        .radio-card input[type="radio"] {
            position: absolute;
            opacity: 0;
        }
        
        .radio-card .checkmark {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            margin-right: 12px;
            position: relative;
        }
        
        .radio-card input[type="radio"]:checked ~ .checkmark {
            border-color: #e53e3e;
            background-color: #e53e3e;
        }
        
        .radio-card input[type="radio"]:checked ~ .checkmark:after {
            content: "";
            position: absolute;
            left: 5px;
            top: 2px;
            width: 6px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #e53e3e 0%, #ed8936 100%);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header dengan logo saja -->
    <div class="bg-white border-b border-gray-200 py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-center items-center mb-6">
                <img src="assets/img/logos/favicon.png" 
                    alt="Streamo Logo" 
                    class="h-10 w-auto">
                <span class="ml-3 text-xl font-bold text-gray-900">Streamo</span>
            </div>
            
            <div class="text-center max-w-3xl mx-auto">
                <h1 class="text-2xl font-bold text-gray-900 sm:text-3xl">Pilih Paket <span class="gradient-text">Subscription</span></h1>
                <p class="mt-3 text-gray-600">Pilih paket yang sesuai dengan kebutuhan bisnis Anda atau buat paket custom</p>
            </div>
        </div>
    </div>

    <!-- Subscription Plans Section -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Plan Type Selection -->
            <div class="max-w-3xl mx-auto mb-10 bg-white p-5 rounded-lg shadow-sm">
                <h2 class="text-lg font-medium text-gray-900 mb-4">Jenis Paket:</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label class="radio-card flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer">
                        <input type="radio" name="plan-type" value="regular" checked>
                        <span class="checkmark"></span>
                        <div>
                            <h3 class="font-medium text-gray-900">Paket Regular</h3>
                            <p class="text-sm text-gray-600">Pilih dari paket yang sudah tersedia</p>
                        </div>
                    </label>
                    
                    <label class="radio-card flex items-center p-4 bg-gray-50 rounded-lg border border-gray-200 cursor-pointer">
                        <input type="radio" name="plan-type" value="custom">
                        <span class="checkmark"></span>
                        <div>
                            <h3 class="font-medium text-gray-900">Paket Custom</h3>
                            <p class="text-sm text-gray-600">Atur sesuai kebutuhan spesifik Anda</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Regular Plans Tab -->
            <div id="regular-plans" class="tab-content active">
                <div id="subscription-plans" class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
                    <!-- Subscription plans will be loaded here -->
                </div>
            </div>

            <!-- Custom Plans Tab -->
            <div id="custom-plans" class="tab-content">
                <div class="max-w-3xl mx-auto bg-white rounded-lg shadow-sm p-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-5 text-center">Konfigurasi Paket Custom</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="mb-5">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Jumlah Akun</label>
                                <div class="flex items-center">
                                    <button id="decrease-account" class="bg-gray-200 text-gray-700 px-3 py-2 rounded-l-lg">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" id="custom-account" min="1" value="1" class="w-16 text-center border-y border-gray-300 py-2">
                                    <button id="increase-account" class="bg-gray-200 text-gray-700 px-3 py-2 rounded-r-lg">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="mb-5">
                                <label class="block text-sm font-medium text-gray-700 mb-2">Durasi (bulan)</label>
                                <div class="flex items-center">
                                    <button id="decrease-duration" class="bg-gray-200 text-gray-700 px-3 py-2 rounded-l-lg">
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <input type="number" id="custom-duration" min="1" value="1" class="w-16 text-center border-y border-gray-300 py-2">
                                    <button id="increase-duration" class="bg-gray-200 text-gray-700 px-3 py-2 rounded-r-lg">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <p class="text-xs text-gray-500 mt-1">Minimal 1 bulan</p>
                            </div>
                        </div>
                        
                        <div>
                            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200">
                                <h4 class="text-lg font-medium text-gray-900 mb-4">Ringkasan Paket Custom</h4>
                                
                                <div class="flex justify-between mb-2">
                                    <span class="text-gray-600">Jumlah Akun:</span>
                                    <span id="summary-account" class="font-medium">1</span>
                                </div>
                                
                                <div class="flex justify-between mb-2">
                                    <span class="text-gray-600">Durasi:</span>
                                    <span id="summary-duration" class="font-medium">1 bulan</span>
                                </div>
                                
                                <div class="border-t border-gray-300 my-4 pt-4">
                                    <div class="text-center">
                                        <p class="text-sm text-gray-600">Harga akan dihitung oleh sistem</p>
                                        <p class="text-xs text-gray-500 mt-1">Berdasarkan jumlah akun dan durasi</p>
                                    </div>
                                </div>
                                
                                <button id="btn-custom-checkout" class="mt-4 w-full py-2 px-4 rounded-lg text-sm font-medium text-white btn-primary">
                                    Pilih Paket Custom
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white pt-10 pb-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex justify-center items-center mb-5">
                    <img src="assets/img/logos/favicon.png" 
                        alt="Streamo Logo" 
                        class="h-10 w-auto">
                    <span class="text-lg font-bold ml-2">Streamo</span>
                </div>
                <p class="text-gray-400 mb-5 max-w-2xl mx-auto">
                    Platform monitoring live Shopee terdepan dengan fitur lengkap untuk meningkatkan penjualan Anda.
                </p>
                <div class="flex justify-center space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i class="fab fa-facebook-f text-lg"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white">
                        <i class="fab fa-instagram text-lg"></i>
                    </a>
                    <a href="https://wa.me/6285727174825" class="text-gray-400 hover:text-white">
                        <i class="fab fa-whatsapp text-lg"></i>
                    </a>
                </div>
            </div>

            <div class="border-t border-gray-700 mt-10 pt-6 text-center">
                <p class="text-slate-400 text-sm">
                    Copyright © <script>document.write(new Date().getFullYear());</script>
                    <a href="/" class="font-semibold text-red-500 hover:underline ml-1">Streamo</a>.
                    A product of 
                    <a href="https://indosofthouse.com" target="_blank" class="font-semibold text-slate-400 hover:text-white ml-1">
                        IndoSoftHouse
                    </a>
                </p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Plan type selection
            const planTypeRadios = document.querySelectorAll('input[name="plan-type"]');
            const regularPlansTab = document.getElementById('regular-plans');
            const customPlansTab = document.getElementById('custom-plans');
            
            planTypeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'regular') {
                        regularPlansTab.classList.add('active');
                        customPlansTab.classList.remove('active');
                    } else {
                        regularPlansTab.classList.remove('active');
                        customPlansTab.classList.add('active');
                    }
                });
            });
            
            // Fetch subscription plans from API
            fetch('/api/subscriptions')
                .then(response => response.json())
                .then(data => {
                    if (data.status === 'success') {
                        const plansContainer = document.getElementById('subscription-plans');
                        data.data.forEach(plan => {
                            // Convert days to months for display
                            const durationInMonths = Math.round(plan.duration / 30);
                            const planElement = document.createElement('div');
                            planElement.className = 'bg-white rounded-lg overflow-hidden pricing-card';
                            planElement.innerHTML = `
                                <div class="p-6">
                                    <h3 class="text-xl font-bold text-gray-900">${plan.name}</h3>
                                    <p class="mt-3 text-gray-600">${plan.description}</p>
                                    <div class="mt-5">
                                        <span class="text-3xl font-bold text-gray-900">Rp ${plan.price.toLocaleString('id-ID')}</span>
                                        <span class="text-base font-medium text-gray-500">/${durationInMonths} bulan</span>
                                    </div>
                                    <ul class="mt-5 space-y-3">
                                        <li class="flex items-center">
                                            <div class="feature-icon bg-green-100 text-green-600">
                                                <i class="fas fa-user-circle"></i>
                                            </div>
                                            <span class="ml-3 text-gray-600">Limit Akun: ${plan.limitAkun}</span>
                                        </li>
                                        <li class="flex items-center">
                                            <div class="feature-icon bg-blue-100 text-blue-600">
                                                <i class="fas fa-sync-alt"></i>
                                            </div>
                                            <span class="ml-3 text-gray-600">Update Berkala</span>
                                        </li>
                                        <li class="flex items-center">
                                            <div class="feature-icon bg-purple-100 text-purple-600">
                                                <i class="fas fa-headset"></i>
                                            </div>
                                            <span class="ml-3 text-gray-600">Support 24/7</span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="bg-gray-50 px-6 py-5">
                                    <a href="/subscription/checkout/${plan.id}" class="block w-full py-2 px-4 rounded-lg text-sm font-medium text-center text-white btn-primary">
                                        Pilih Paket
                                    </a>
                                </div>
                            `;
                            plansContainer.appendChild(planElement);
                        });
                    }
                })
                .catch(error => {
                    console.error('Error fetching subscription plans:', error);
                    // Fallback plan if API fails
                    const plansContainer = document.getElementById('subscription-plans');
                    plansContainer.innerHTML = `
                        <div class="bg-white rounded-lg overflow-hidden pricing-card">
                            <div class="p-6">
                                <h3 class="text-xl font-bold text-gray-900">Premium</h3>
                                <p class="mt-3 text-gray-600">Akses semua fitur tanpa batas untuk monitor live Shopee</p>
                                <div class="mt-5">
                                    <span class="text-3xl font-bold text-gray-900">Rp 100.000</span>
                                    <span class="text-base font-medium text-gray-500">/1 bulan</span>
                                </div>
                                <ul class="mt-5 space-y-3">
                                    <li class="flex items-center">
                                        <div class="feature-icon bg-green-100 text-green-600">
                                            <i class="fas fa-user-circle"></i>
                                        </div>
                                        <span class="ml-3 text-gray-600">Limit Akun: 1</span>
                                    </li>
                                    <li class="flex items-center">
                                        <div class="feature-icon bg-blue-100 text-blue-600">
                                            <i class="fas fa-sync-alt"></i>
                                        </div>
                                        <span class="ml-3 text-gray-600">Update Berkala</span>
                                    </li>
                                    <li class="flex items-center">
                                        <div class="feature-icon bg-purple-100 text-purple-600">
                                            <i class="fas fa-headset"></i>
                                        </div>
                                        <span class="ml-3 text-gray-600">Support 24/7</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-gray-50 px-6 py-5">
                                <a href="/subscription/checkout/1" class="block w-full py-2 px-4 rounded-lg text-sm font-medium text-center text-white btn-primary">
                                    Pilih Paket
                                </a>
                            </div>
                        </div>
                    `;
                });

            // Custom plan functionality
            const customAccount = document.getElementById('custom-account');
            const customDuration = document.getElementById('custom-duration');
            const decreaseAccount = document.getElementById('decrease-account');
            const increaseAccount = document.getElementById('increase-account');
            const decreaseDuration = document.getElementById('decrease-duration');
            const increaseDuration = document.getElementById('increase-duration');
            const btnCustomCheckout = document.getElementById('btn-custom-checkout');
            
            // Summary elements
            const summaryAccount = document.getElementById('summary-account');
            const summaryDuration = document.getElementById('summary-duration');
            
            // Update summary function
            function updateSummary() {
                const accountCount = parseInt(customAccount.value);
                const durationMonths = parseInt(customDuration.value);
                
                summaryAccount.textContent = accountCount;
                summaryDuration.textContent = `${durationMonths} bulan`;
            }
            
            // Event listeners for custom plan
            decreaseAccount.addEventListener('click', () => {
                if (parseInt(customAccount.value) > 1) {
                    customAccount.value = parseInt(customAccount.value) - 1;
                    updateSummary();
                }
            });
            
            increaseAccount.addEventListener('click', () => {
                customAccount.value = parseInt(customAccount.value) + 1;
                updateSummary();
            });
            
            decreaseDuration.addEventListener('click', () => {
                if (parseInt(customDuration.value) > 1) {
                    customDuration.value = parseInt(customDuration.value) - 1;
                    updateSummary();
                }
            });
            
            increaseDuration.addEventListener('click', () => {
                customDuration.value = parseInt(customDuration.value) + 1;
                updateSummary();
            });
            
            customAccount.addEventListener('change', updateSummary);
            customDuration.addEventListener('change', updateSummary);
            
            // Initialize summary
            updateSummary();
            
            // Custom checkout button
            btnCustomCheckout.addEventListener('click', () => {
                const accountCount = parseInt(customAccount.value);
                const durationMonths = parseInt(customDuration.value);
                
                // Convert months to days for the backend
                const durationDays = durationMonths * 30;
                
                // Redirect to checkout with custom parameters
                window.location.href = `/subscription/custom-checkout?accounts=${accountCount}&duration=${durationDays}`;
            });
        });
    </script>
</body>
</html>